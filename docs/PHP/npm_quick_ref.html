<!DOCTYPE html>
<html lang="en">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
	crossorigin="anonymous">
<link rel="stylesheet" href="./prism.css">
<link rel="stylesheet" href="./prism.css">
<link rel="stylesheet" href="./styles.css">
<style>
	h1 {
		color: green;
	}

	pre {
		border: 1px dashed red;
	}
</style>
<body>

	<nav>
		<ul>
<li><a class="" href="../index.html">index</a></li>
<li class="heading"><span>CSS</span></li>
<ul>
<li><a class="" href="../CSS/css-media-and-rwd.html">css media and rwd</a></li>
<li><a class="" href="../CSS/css-naming-convention.html">css naming convention</a></li>
<li><a class="" href="../CSS/css_page_media.html">css page media</a></li>
<li><a class="" href="../CSS/flexbox-review.html">flexbox review</a></li>
<li><a class="" href="../CSS/grid-review.html">grid review</a></li>
<li><a class="" href="../CSS/notes_grid_or_flexbox.html">notes grid or flexbox</a></li>
<li><a class="" href="../CSS/rwd-snippets.html">rwd snippets</a></li>
<li><a class="" href="../CSS/sizing_items_in_css.html">sizing items in css</a></li>
</ul>
<li class="heading"><span>Github</span></li>
<ul>
<li><a class="" href="../Github/gcm.html">gcm</a></li>
<li><a class="" href="../Github/git-branching.html">git branching</a></li>
<li><a class="" href="../Github/git-flight-rules.html">git flight rules</a></li>
<li><a class="" href="../Github/git-gcm-configure.html">git gcm configure</a></li>
<li><a class="" href="../Github/git.html">git</a></li>
<li><a class="" href="../Github/gitpod.html">gitpod</a></li>
<li><a class="" href="../Github/integrate_github_with_wordpress.html">integrate github with wordpress</a></li>
<li><a class="" href="../Github/md-to-github.html">md to github</a></li>
</ul>
<li class="heading"><span>Leaf 3</span></li>
<ul>
<li><a class="" href="../Leaf-3/basic.html">basic</a></li>
<li><a class="" href="../Leaf-3/helpers.html">helpers</a></li>
<li><a class="" href="../Leaf-3/mvc.html">mvc</a></li>
</ul>
<li class="heading"><span>Network Net</span></li>
<ul>
<li><a class="" href="../Network_Net/anonsurf_vpn_install.html">anonsurf vpn install</a></li>
<li><a class="" href="../Network_Net/dd-wrt.html">dd wrt</a></li>
<li><a class="" href="../Network_Net/dd-wrt_multiple_bssids.html">dd wrt multiple bssids</a></li>
<li><a class="" href="../Network_Net/ddwrt_basic_wl_settings.html">ddwrt basic wl settings</a></li>
<li><a class="" href="../Network_Net/download_youtube_videos.html">download youtube videos</a></li>
<li><a class="" href="../Network_Net/riseup-vpn.html">riseup vpn</a></li>
</ul>
<li class="heading"><span>PHP</span></li>
<ul>
<li><a class="" href="22092023.html">22092023</a></li>
<li><a class="" href="LearningResources.html">LearningResources</a></li>
<li><a class="" href="edx_js_backend_frameworks.html">edx js backend frameworks</a></li>
<li><a class="" href="embed_lib.html">embed lib</a></li>
<li><a class="" href="express_mdn.html">express mdn</a></li>
<li><a class="" href="helpful_resources.html">helpful resources</a></li>
<li><a class="" href="html_forms.html">html forms</a></li>
<li><a class="" href="http_response_codes.html">http response codes</a></li>
<li><a class="" href="json_guide.html">json guide</a></li>
<li><a class="" href="local-servers.html">local servers</a></li>
<li><a class="" href="logical_gradation_of_developers.html">logical gradation of developers</a></li>
<li><a class="" href="markdown.html">markdown</a></li>
<li><a class="" href="namespace_review.html">namespace review</a></li>
<li><a class="" href="notes_for_proff_nodejs_express.html">notes for proff nodejs express</a></li>
<li><a class="active" href="npm_quick_ref.html">npm quick ref</a></li>
<li><a class="" href="pandoc_quick_ref.html">pandoc quick ref</a></li>
<li><a class="" href="php_basics.html">php basics</a></li>
<li><a class="" href="php_iterators.html">php iterators</a></li>
<li><a class="" href="wget-ultimate-examples.html">wget ultimate examples</a></li>
</ul>
<li class="heading"><span>Packaging</span></li>
<ul>
<li><a class="" href="../Packaging/apt.html">apt</a></li>
<li><a class="" href="../Packaging/composer.html">composer</a></li>
</ul>
<li class="heading"><span>ReviewQuestions</span></li>
<ul>
<li><a class="" href="../ReviewQuestions/strings_quotes.html">strings quotes</a></li>
</ul>
<li class="heading"><span>Symfony</span></li>
<ul>
<li><a class="" href="../Symfony/Encore.html">Encore</a></li>
<li class="heading"><span>Symfonycasts</span></li>
<ul>
<li><a class="" href="../Symfony/Symfonycasts/Composer.html">Composer</a></li>
<li><a class="" href="../Symfony/Symfonycasts/Dependency Injection and the art of services and containers.html">Dependency Injection and the art of services and containers</a></li>
<li><a class="" href="../Symfony/Symfonycasts/Symfony 6 Fundamentals: Services, Config & Environments.html">Symfony 6 Fundamentals: Services, Config & Environments</a></li>
</ul>
<li><a class="" href="../Symfony/chapter5_symfonyCats.html">chapter5 symfonyCats</a></li>
<li><a class="" href="../Symfony/symfony_and_http_fundamentals.html">symfony and http fundamentals</a></li>
<li><a class="" href="../Symfony/symfony_basics.html">symfony basics</a></li>
<li><a class="" href="../Symfony/twig_basics.html">twig basics</a></li>
<li><a class="" href="../Symfony/twig_cheatsheet.html">twig cheatsheet</a></li>
</ul>
<li class="heading"><span>javascript</span></li>
<ul>
<li><a class="" href="../javascript/js_cheatsheet.html">js cheatsheet</a></li>
</ul>
</ul>
	</nav>
	<article>
	<h1 id="npm-quick-reference">NPM Quick Reference <a class="heading-anchor-permalink" href="#npm-quick-reference">#</a></h1>
<pre><code class="language-bash">
$ which node # where installed

/usr/bin/node

$ node --version # check version

v12.15.0

$ node

&gt; console.log('Node is running');

Node is running

&gt; .help

.break Sometimes you get stuck, this gets you out

.clear Alias for .break

.editor Enter editor mode

.exit Exit the repl

.help Print this help message

.load Load JS from a file into the REPL session

.save Save all evaluated commands in this REPL session to a file

  

Press ^C to abort current expression, ^D to exit the repl

</code></pre>
<blockquote>
<p>Node.js installation is OK, lets check <code>npm</code></p>
</blockquote>
<pre><code class="language-bash">
$ which npm

/usr/bin/npm

$ npm --version

6.13.7

</code></pre>
<blockquote>
<p>For Node Package Manager, is a separate project from Node.js. It tends to be updated more frequently. You can check the latest available npm version on this <a href="https://www.npmjs.com/package/npm.">https://www.npmjs.com/package/npm.</a></p>
</blockquote>
<blockquote>
<p>to be sure, update <code>npm</code>:</p>
</blockquote>
<pre><code class="language-bash">
npm install -g npm@latest

</code></pre>
<h2 id="node-packaged-modules">Node Packaged Modules <a class="heading-anchor-permalink" href="#node-packaged-modules">#</a></h2>
<ul>
<li>In <code>Local</code> mode Inside <code>node_modules</code> folder in your parent working directory. This location is owned by the current user. If you’re not using a [version manager] (such as nvm)</li>
</ul>
<pre><code class="language-bash">
$curl -o https://raw.githubusercontent.com/creationix nvm/v0.35.2/install.sh | bash

</code></pre>
<blockquote>
<p>See <a href="https://www.sitepoint.com/quick-tip-multiple-versions-node-nvm/%5D">https://www.sitepoint.com/quick-tip-multiple-versions-node-nvm/]</a>which you probably should be)</p>
</blockquote>
<blockquote>
<p>global packages are in <code>{prefix}/lib/node_modules/</code>, which is owned by root (where <code>{prefix}</code> is usually <code>/usr/</code> or <code>/usr/local</code>). This means you would have to use <code>sudo</code> to install packages globally, which could cause permission errors when resolving third-party dependencies, as well as being a security concern.</p>
</blockquote>
<h2 id="changing-the-location-of-global-packages">Changing the Location of Global Packages <a class="heading-anchor-permalink" href="#changing-the-location-of-global-packages">#</a></h2>
<p>Let’s see what output <code>npm config</code> gives us:</p>
<pre><code class="language-bash">
$ npm config list

; cli configs

metrics-registry = &quot;https://registry.npmjs.org/&quot;

scope = &quot;&quot;

user-agent = &quot;npm/6.13.7 node/v12.15.0 linux x64&quot;

  

; node bin location = /usr/bin/nodejs

; cwd = /home/sitepoint

; HOME = /home/sitepoint

;  &quot;npm config ls -l&quot; to show all defaults.

  

</code></pre>
<p>This gives us information about our install. For now, it’s important to get the current global location:</p>
<pre><code class="language-bash">
$ npm config get prefix

/usr

  

</code></pre>
<p>This is the prefix we want to change, in order to install global packages in our home directory. To do that create a new directory in your home folder:</p>
<pre><code class="language-bash">
$cd  ~  &amp;&amp; mkdir .node_modules_global

$ npm config set prefix=$HOME/.node_modules_global

</code></pre>
<p>With this simple configuration change, we’ve altered the location to which global Node packages are installed. This also creates a <code>.npmrc</code> file in our home directory:</p>
<pre><code class="language-bash">
$ npm config get prefix

/home/sitepoint/.node_modules_global

$ cat .npmrc

prefix=/home/sitepoint/.node_modules_global

  

</code></pre>
<p>We still have npm installed in a location owned by root. But because we changed our global package location, we can take advantage of that. We need to install npm again, but this time in the new, user-owned location. This will also install the latest version of npm:</p>
<pre><code class="language-bash">
npm install npm@latest -g

  

</code></pre>
<p>Finally, we need to add <code>.node_modules_global/bin</code> to our <code>$PATH</code> environment variable, so that we can run global packages from the command line. Do this by appending the following line to your <code>.profile</code>, <code>.bash_profile</code>or <code>.bashrc</code> and restarting your terminal:</p>
<pre><code class="language-bash">
export PATH=&quot;$HOME/.node_modules_global/bin:$PATH&quot;

  

</code></pre>
<p>Now our <code>.node_modules_global/bin</code> will be found first and the correct version of npm will be used:</p>
<pre><code class="language-bash">
$ which npm

/home/sitepoint/.node_modules_global/bin/npm

$ npm --version

6.13.7

  

</code></pre>
<p><em>Tip: you can avoid all of this if you use a Node version manager. Check out this tutorial to find out how: <a href="https://www.sitepoint.com/quick-tip-multiple-versions-node-nvm/">Installing Multiple Versions of Node.js Using nvm</a>.</em></p>
<h2 id="installing-packages-in-global-mode">Installing Packages in Global Mode <a class="heading-anchor-permalink" href="#installing-packages-in-global-mode">#</a></h2>
<p>At the moment, we only have one package installed globally — the npm package itself. So let’s change that and install <a href="https://www.npmjs.com/package/uglify-js">UglifyJS</a> (a JavaScript minification tool). We use the <code>--global</code> flag, but this can be abbreviated to <code>-g</code>:</p>
<pre><code class="language-bash">
$ npm install uglify-js --global

/home/sitepoint/.node_modules_global/bin/uglifyjs -&gt; /home/sitepoint/.node_modules_global/lib/node_modules/uglify-js/bin/uglifyjs

+ uglify-js@3.7.7

added 3 packages from 38 contributors in 0.259s

  

</code></pre>
<p>As you can see from the output, additional packages are installed. These are UglifyJS’s dependencies.</p>
<h2 id="listing-global-packages">Listing Global Packages <a class="heading-anchor-permalink" href="#listing-global-packages">#</a></h2>
<p>We can list the global packages we’ve installed with the <code>npm list</code> command:</p>
<pre><code class="language-bash">
$ npm list --global

home/sitepoint/.node_modules_global/lib

├─┬ npm@6.9.0

│ ├── abbrev@1.1.1

│ ├── ansicolors@0.3.2

│ ├── ansistyles@0.1.3

│ ├── aproba@2.0.0

│ ├── archy@1.0.0

....................

└─┬ uglify-js@3.5.3

├── commander@2.19.0

└── source-map@0.6.1

  

</code></pre>
<p>The output, however, is rather verbose. We can change that with the <code>--depth=0</code> option:</p>
<pre><code class="language-bash">
$ npm list -g --depth=0

/home/sitepoint/.node_modules_global/lib

├── npm@6.13.7

└── uglify-js@3.7.7

  

</code></pre>
<p>That’s better; now we see just the packages we’ve installed along with their version numbers.</p>
<p>Any packages installed globally will become available from the command line. For example, here’s how you would use the Uglify package to minify <code>example.js</code> into <code>example.min.js</code>:</p>
<pre><code class="language-bash">
$uglifyjs example.js -o example.min.js

</code></pre>
<h2 id="installing-packages-in-local-mode">Installing Packages in Local Mode <a class="heading-anchor-permalink" href="#installing-packages-in-local-mode">#</a></h2>
<p>When you install packages locally, you normally do so using a <code>package.json</code> file. Let’s go ahead and create one:</p>
<pre><code class="language-bash">
$ mkdir project &amp;&amp;  cd project

  

$ npm init

package name: (project)

version: (1.0.0)

description: Demo of package.json

entry point: (index.js)

test command:

git repository:

keywords:

author:

license: (ISC)

  

</code></pre>
<p>Press Return to accept the defaults, then press it again to confirm your choices. This will create a <code>package.json</code> file at the root of the project:</p>
<pre><code class="language-javascript">
{

&quot;name&quot;: &quot;project&quot;,

&quot;version&quot;: &quot;1.0.0&quot;,

&quot;description&quot;: &quot;&quot;,

&quot;main&quot;: &quot;index.js&quot;,

&quot;scripts&quot;: {

&quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;

},

&quot;author&quot;: &quot;&quot;,

&quot;license&quot;: &quot;ISC&quot;

}

  

</code></pre>
<p><em>Tip: If you want a quicker way to generate a <code>package.json</code> file use <code>npm init --y</code>.</em></p>
<p>The fields are hopefully pretty self-explanatory, with the exception of <code>main</code> and <code>scripts</code>. The <code>main</code> field is the primary entry point to your program, and the <code>scripts</code> field lets you specify script commands that are run at various times in the life cycle of your package. We can leave these as they are for now, but if you’d like to find out more, see the <a href="https://docs.npmjs.com/files/package.json">package.json documentation on npm</a> and this article on <a href="https://www.sitepoint.com/guide-to-npm-as-a-build-tool/">using npm as a build tool</a>.</p>
<p>Now let’s try and install <a href="http://underscorejs.org/">Underscore</a>:</p>
<pre><code class="language-bash">
$ npm install underscore

npm notice created a lockfile as package-lock.json. You should commit this file.

npm WARN project@1.0.0 No repository field.

  

+ underscore@1.9.2

added 1 package from 1 contributor and audited 1 package in 0.412s

found 0 vulnerabilities

  

</code></pre>
<p><em>Note that a lockfile is created. We’ll be coming back to this later.</em></p>
<p>Now if we have a look in <code>package.json</code>, we’ll see that a <code>dependencies</code> field has been added:</p>
<p><a href="https://www.sitepoint.com/beginners-guide-node-package-manager/#report-ad">Report Advertisement</a></p>
<pre><code class="language-javascript">
{

...

&quot;dependencies&quot;: {

&quot;underscore&quot;: &quot;^1.9.2&quot;

}

}

  

</code></pre>
<h2 id="managing-dependencies-with-package.json">Managing Dependencies with package.json <a class="heading-anchor-permalink" href="#managing-dependencies-with-package.json">#</a></h2>
<p>As you can see, Underscore v1.9.2 was installed in our project. The caret (<code>^</code>) at the front of the version number indicates that when installing, npm will pull in the highest version of the package it can find where only the major version has to match (unless a <code>package-lock.json</code> file is present). In our case, that would be anything below v2.0.0. This method of versioning dependencies (major.minor.patch) is known as <strong>semantic versioning</strong>. You can read more about it here: <a href="https://www.sitepoint.com/semantic-versioning-why-you-should-using/">Semantic Versioning: Why You Should Be Using it</a>.</p>
<p>Also notice that Underscore was saved as a property of the <code>dependencies</code> field. This has become the default in the latest version of npm and is used for packages (like Underscore) required for the application to run. It would also be possible to save a package as a <code>devDependency</code> by specifying a <code>--save-dev</code> flag. <code>devDependencies</code> are packages used for development purposes — for example, for running tests or transpiling code.</p>
<p><em>Tip: you can also add <code>private: true</code> to <code>package.json</code> to prevent accidental publication of private repositories, as well as suppressing any warnings generated when running <code>npm install</code>.</em></p>
<p>Far and away the biggest reason for using <code>package.json</code> to specify a project’s dependencies is portability. For example, when you clone someone else’s code, all you have to do is run <code>npm i</code> in the project root and npm will resolve and fetch all of the necessary packages for you to run the app. We’ll look at this in more detail later.</p>
<p>Before finishing this section, let’s quickly check that Underscore is working. Create a file called <code>test.js</code> in the project root and add the following:</p>
<pre><code class="language-javascript">
const  _  =  require(&quot;underscore&quot;);

console.log(_.range(5));

  

</code></pre>
<p>Run the file using <code>node test.js</code> and you should see <code>[0, 1, 2, 3, 4]</code> output to the screen.</p>
<h2 id="uninstalling-local-packages">Uninstalling Local Packages <a class="heading-anchor-permalink" href="#uninstalling-local-packages">#</a></h2>
<p>npm is a package manager, so it must be able to remove a package. Let’s assume that the current Underscore package is causing us compatibility problems. We can remove the package and install an older version, like so:</p>
<pre><code class="language-bash">
$ npm uninstall underscore

removed 1 package in 0.386s

  

$ npm list

project@1.0.0 /home/sitepoint/project

└── (empty)

</code></pre>
<h2 id="installing-a-specific-version-of-a-package">Installing a Specific Version of a Package <a class="heading-anchor-permalink" href="#installing-a-specific-version-of-a-package">#</a></h2>
<p>We can now install the Underscore package in the version we want. We do that by using the @ sign to append a version number:</p>
<pre><code class="language-bash">
$ npm install underscore@1.9.1

+ underscore@1.9.1

added 1 package in 1.574s

  

$ npm list

project@1.0.0 /home/sitepoint/project

└── underscore@1.9.1

  

</code></pre>
<h2 id="updating-a-package">Updating a Package <a class="heading-anchor-permalink" href="#updating-a-package">#</a></h2>
<p>Let’s check if there’s an update for the Underscore package:</p>
<pre><code class="language-bash">
$ npm outdated

Package Current Wanted Latest Location

underscore 1.9.1 1.9.2 1.9.2 project

</code></pre>
<p>The <em>Current</em> column shows us the version that is installed locally. The <em>Latest</em> column tells us the latest version of the package. And the <em>Wanted</em> column tells us the latest version of the package we can upgrade to without breaking our existing code.</p>
<p>Remember the <code>package-lock.json</code> file from earlier? Introduced in npm v5, the purpose of this file is to ensure that the dependencies remain <em>exactly</em> the same on all machines the project is installed on. It’s automatically generated for any operations where npm modifies either the <code>node_modules</code> folder or the <code>package.json</code> file.</p>
<p>You can go ahead and try this out if you like. Delete the <code>node_modules</code> folder, then re-run <code>npm i</code> (this is short for <code>npm install</code>). npm will re-install Underscore v1.9.1, even though we just saw that v1.9.2 is available. This is because we specified version 1.9.1 in the <code>package-lock.json</code> file:</p>
<pre><code class="language-javascript">
{

&quot;name&quot;: &quot;project&quot;,

&quot;version&quot;: &quot;1.0.0&quot;,

&quot;lockfileVersion&quot;: 1,

&quot;requires&quot;: true,

&quot;dependencies&quot;: {

&quot;underscore&quot;: {

&quot;version&quot;: &quot;1.9.1&quot;,

&quot;resolved&quot;: &quot;https://registry.npmjs.org/underscore/-/underscore-1.9.1.tgz&quot;,

&quot;integrity&quot;: &quot;sha512-5/4etnCkd9c8gwgowi5/om/mYO5ajCaOgdzj/oW+0eQV9WxKBDZw5+ycmKmeaTXjInS/W0BzpGLo2xR2aBwZdg==&quot;

}

}

}

  

</code></pre>
<p>Prior to the emergence of the <code>package-lock.json</code> file, inconsistent package versions proved a big headache for developers. This was normally solved by using an <code>npm-shrinkwrap.json</code> file, which had to be manually created.</p>
<p>Now, let’s assume the latest version of Underscore fixed the bug we had earlier and we want to update our package to that version:</p>
<pre><code class="language-bash">
$ npm update underscore

+ underscore@1.9.2

updated 1 package in 0.236s

  

$ npm list

project@1.0.0 /home/sitepoint/project

└── underscore@1.9.2

  

</code></pre>
<p><em>Tip: for this to work, Underscore has to be listed as a dependency in <code>package.json</code>. We can also execute <code>npm update</code> if we have many outdated modules we want to update.</em></p>
<h2 id="searching-for-packages">Searching for Packages <a class="heading-anchor-permalink" href="#searching-for-packages">#</a></h2>
<p>We’ve used the <code>mkdir</code> command a couple of times in this tutorial. Is there a Node package that has this functionality? Let’s use <code>npm search</code>:</p>
<pre><code class="language-bash">
$ npm search mkdir

NAME | DESCRIPTION | AUTHOR | DATE

mkdir | Directory creation… | =joehewitt | 2012-04-17

fs-extra | fs-extra contains… | =jprichardson… | 2019-06-28

mkdirp | Recursively mkdir,… | =isaacs… | 2020-01-24

make-dir | Make a directory… | =sindresorhus | 2019-04-01

...

  

</code></pre>
<p>There’s (<a href="https://www.npmjs.com/package/mkdirp">mkdirp</a>). Let’s install it:</p>
<pre><code class="language-bash">
$ npm install mkdirp

+ mkdirp@1.0.3

added 1 package and audited 2 packages in 0.384s

  

</code></pre>
<p>Now create a <code>mkdir.js</code> fie and copy–paste this code:</p>
<pre><code class="language-javascript">
const  mkdirp  =  require('mkdirp');

  

const  made  =  mkdirp.sync('/tmp/foo/bar/baz');

console.log(`made directories, starting with ${made}`);

  

</code></pre>
<p>Next, run it from the terminal:</p>
<pre><code class="language-bash">
$ node mkdir.js

made directories, starting with /tmp/foo

  

</code></pre>
<h2 id="re-installing-project-dependencies">Re-installing Project Dependencies <a class="heading-anchor-permalink" href="#re-installing-project-dependencies">#</a></h2>
<p>Let’s first install one more package:</p>
<pre><code class="language-bash">
$ npm install request

+ request@2.88.0

added 48 packages from 59 contributors and audited 65 packages in 2.73s

found 0 vulnerabilities

  

</code></pre>
<p>Check the <code>package.json</code>:</p>
<pre><code class="language-javascript">
&quot;dependencies&quot;: {

&quot;mkdirp&quot;: &quot;^1.0.3&quot;,

&quot;request&quot;: &quot;^2.88.0&quot;,

&quot;underscore&quot;: &quot;^1.9.2&quot;

},

  

</code></pre>
<p>Note the dependencies list got updated automatically. If you wanted to install a package without saving it in <code>package.json</code>, just use the <code>--no-save</code> argument.</p>
<p>Let’s assume you’ve cloned your project source code to a another machine and we want to install the dependencies. Let’s delete the <code>node_modules</code> folder first, then execute <code>npm install</code>:</p>
<pre><code class="language-bash">
$ rm -R node_modules

$ npm list --depth=0

project@1.0.0 /home/sitepoint/project

├── UNMET DEPENDENCY mkdirp@1.0.3

├─┬ UNMET DEPENDENCY request@2.88.0

...

└── UNMET DEPENDENCY underscore@1.9.2

  

npm ERR! missing: mkdirp@1.0.3, required by project@1.0.0

npm ERR! missing: request@2.88.0, required by project@1.0.0

npm ERR! missing: underscore@1.9.2, required by project@1.0.0

...

  

$ npm install

added 50 packages from 60 contributors and audited 65 packages in 1.051s

found 0 vulnerabilities

  

</code></pre>
<p>If you look at your <code>node_modules</code> folder, you’ll see that it gets recreated again. This way, you can easily share your code with others without bloating your project and source repositories with dependencies.</p>
<h2 id="managing-the-cache">Managing the Cache <a class="heading-anchor-permalink" href="#managing-the-cache">#</a></h2>
<p>When npm installs a package, it keeps a copy, so the next time you want to install that package, it doesn’t need to hit the network. The copies are cached in the <code>.npm</code> directory in your home path:</p>
<pre><code class="language-bash">
$ ls ~/.npm

anonymous-cli-metrics.json _cacache index-v5 _locks _logs node-sass

  

</code></pre>
<p>This directory will get cluttered with old packages over time, so it’s useful to clean it up occasionally:</p>
<pre><code class="language-bash">
$npm cache clean --force

  

</code></pre>
<p>You can also purge all <code>node_module</code> folders from your workspace if you have multiple node projects on your system you want to clean up:</p>
<pre><code class="language-bash">
find . -name &quot;node_modules&quot; -type d -exec rm -rf '{}' +

  

</code></pre>
<h2 id="audit">Audit <a class="heading-anchor-permalink" href="#audit">#</a></h2>
<p>Have you noticed all of those <code>found 0 vulnerabilities</code> scattered throughout the CLI output? The reason for this is that a new feature was introduced in npm that allows developers to scan the dependencies for known security vulnerabilities.</p>
<p>Let’s try out this feature by installing an old version of <code>express</code>:</p>
<pre><code class="language-bash">
$ npm install express@4.8.0

  

express@4.8.0

added 36 packages from 24 contributors and audited 123 packages in 2.224s

found 21 vulnerabilities (8 low, 9 moderate, 4 high)

run `npm audit fix` to fix them, or `npm audit`  for details

  

</code></pre>
<p>As soon as we finish installing, we get a quick report that multiple vulnerabilities have been found. You can run the command <code>npm audit</code> to view more details:</p>
<pre><code class="language-bash">
$ npm audit

  

=== npm audit security report ===

  

# Run npm install express@4.17.1 to resolve 21 vulnerabilities

┌───────────────┬──────────────────────────────────────────────────────────────┐

│ High │ Regular Expression Denial of Service │

├───────────────┼──────────────────────────────────────────────────────────────┤

│ Package │ negotiator │

├───────────────┼──────────────────────────────────────────────────────────────┤

│ Dependency of │ express │

├───────────────┼──────────────────────────────────────────────────────────────┤

│ Path │ express &gt; accepts &gt; negotiator │

├───────────────┼──────────────────────────────────────────────────────────────┤

│ More info │ https://nodesecurity.io/advisories/106 │

└───────────────┴──────────────────────────────────────────────────────────────┘

  

┌───────────────┬──────────────────────────────────────────────────────────────┐

│ Moderate │ Timing Attack │

├───────────────┼──────────────────────────────────────────────────────────────┤

│ Package │ cookie-signature │

├───────────────┼──────────────────────────────────────────────────────────────┤

│ Dependency of │ express │

├───────────────┼──────────────────────────────────────────────────────────────┤

│ Path │ express &gt; cookie-signature │

├───────────────┼──────────────────────────────────────────────────────────────┤

│ More info │ https://nodesecurity.io/advisories/134 │

└───────────────┴──────────────────────────────────────────────────────────────┘

  

</code></pre>
<p>You’ll get a detailed list of packages that have vulnerabilities. If you look at the <code>Path</code> field, it shows the dependency path. For example, the Path <code>express &gt; accepts &gt; negotiator</code> means Express depends on the <code>Accepts</code> package. The <code>Accepts</code> package depends on the the <code>negotiator</code> package, which contains the vulnerability.</p>
<p>There are two ways of fixing all these problems. We can either execute the command <code>npm install express@4.17.1</code> as suggested, or run <code>npm audit fix</code>. Let’s do the latter:</p>
<pre><code class="language-bash">
$ npm audit fix

  

+ express@4.17.1

added 20 packages from 14 contributors, removed 7 packages and updated 29 packages in 1.382s

fixed 21 of 21 vulnerabilities in 122 scanned packages

  

</code></pre>
<p>The command <code>npm audit fix</code> automatically installs any compatible updates to vulnerable dependencies. While this might seem like magic, do note that vulnerabilities can’t always be fixed automatically. This could happen if you’re using a package that’s undergone a major change which could break your current project if updated. For situations such as this, you’ll have to review your code and manually apply the fix.</p>
<p>You can also run <code>npm audit fix --force</code> if you don’t mind upgrading packages with breaking changes. After you’ve executed the command, run <code>npm audit</code> to ensure that all vulnerabilities have been resolved.</p>
<h2 id="aliases">Aliases <a class="heading-anchor-permalink" href="#aliases">#</a></h2>
<p>As you may have noticed, there are multiple ways of running npm commands. Here’s a brief list of some of the commonly used npm aliases:</p>
<ul>
<li>
<p><code>npm i &lt;package&gt;</code>: install local package</p>
</li>
<li>
<p><code>npm i -g &lt;package&gt;</code>: install global package</p>
</li>
<li>
<p><code>npm un &lt;package&gt;</code>: uninstall local package</p>
</li>
<li>
<p><code>npm up</code>: npm update packages</p>
</li>
<li>
<p><code>npm t</code>: run tests</p>
</li>
<li>
<p><code>npm ls</code>: list installed modules</p>
</li>
<li>
<p><code>npm ll</code> or <code>npm la</code>: print additional package information while listing modules</p>
</li>
</ul>
<p>You can also install multiple packages at once like this:</p>
<pre><code class="language-bash">
$npm i express momemt lodash mongoose body-parser webpack

  

</code></pre>
<p>If you want to view all the common npm commands, just execute <code>npm help</code> for the full list. You can also learn more in our article <a href="https://www.sitepoint.com/10-npm-tips-and-tricks/">10 Tips and Tricks That Will Make You an npm Ninja</a>.</p>
<h2 id="npx">npx <a class="heading-anchor-permalink" href="#npx">#</a></h2>
<p>You might also hear talk of npx on your travels. Don’t confuse this with npm. As we’ve learned, npm is a tool for <em>managing</em> your packages, whereas npx is a tool for <em>executing</em> packages. It comes bundled with npm version 5.2+.</p>
<p>A typical use of npx is for executing one-off commands. For example, imagine you wanted to spin up a simple HTTP server. You <em>could</em> install the <a href="https://www.npmjs.com/package/http-server">http-server package</a> globally on your system, which is great if you’ll be using <code>http-server</code> on a regular basis. But if you just want to test the package, or would like to keep your globally installed modules to a minimum, you can change into the directory where you’d like to run it, then execute the following command:</p>
<pre><code class="language-bash">
npx http-server

  

</code></pre>
<p>And this will spin up the server without installing anything globally.</p>
<p>You can <a href="https://blog.npmjs.org/post/162869356040/introducing-npx-an-npm-package-runner">read more about npx here</a>.</p>
<h2 id="conclusion">Conclusion <a class="heading-anchor-permalink" href="#conclusion">#</a></h2>
<p>In this tutorial, we’ve covered the basics of working with npm. We’ve demonstrated how to install Node.js from the project’s download page, how to alter the location of global packages (so we can avoid using <code>sudo</code>), and how to install packages in local and global mode. We also covered deleting, updating and installing a certain version of a package, as well as managing a project’s dependencies.</p>
<p>With every new release, npm is making huge strides into the world of front-end development. <a href="http://frontendhappyhour.com/episodes/npm-install-beer-save-in-mouth/">According to its co-founder</a>, its user base is changing and most of those using it are not using it to write Node at all. Rather, it’s becoming a tool that people use to put JavaScript together on the front end (seriously, you can use it to install just about anything) and one which is becoming an integral part of writing modern JavaScript.</p>
<p>Are you using npm in your projects? If not, now might be a good time to start.</p>

	</article>
	<script src="./prism.css"></script>
	<script src="./prism.js"></script>
	<script>prism.Highlight();</script>
</body>

</html>
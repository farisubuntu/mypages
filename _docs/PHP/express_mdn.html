<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="./_assets/styles.css">
<body>
<nav>
	<ul>
<li><a class="" href="../index.html">index</a></li>
<li class="heading"><span>CSS</span></li>
<ul>
<li><a class="" href="../CSS/css-media-and-rwd.html">css media and rwd</a></li>
<li><a class="" href="../CSS/css-naming-convention.html">css naming convention</a></li>
<li><a class="" href="../CSS/css_page_media.html">css page media</a></li>
<li><a class="" href="../CSS/flexbox-review.html">flexbox review</a></li>
<li><a class="" href="../CSS/grid-review.html">grid review</a></li>
<li><a class="" href="../CSS/notes_grid_or_flexbox.html">notes grid or flexbox</a></li>
<li><a class="" href="../CSS/rwd-snippets.html">rwd snippets</a></li>
<li><a class="" href="../CSS/sizing_items_in_css.html">sizing items in css</a></li>
</ul>
<li class="heading"><span>Github</span></li>
<ul>
<li><a class="" href="../Github/gcm.html">gcm</a></li>
<li><a class="" href="../Github/git-branching.html">git branching</a></li>
<li><a class="" href="../Github/git-flight-rules.html">git flight rules</a></li>
<li><a class="" href="../Github/git-gcm-configure.html">git gcm configure</a></li>
<li><a class="" href="../Github/git.html">git</a></li>
<li><a class="" href="../Github/gitpod.html">gitpod</a></li>
<li><a class="" href="../Github/integrate_github_with_wordpress.html">integrate github with wordpress</a></li>
<li><a class="" href="../Github/md-to-github.html">md to github</a></li>
</ul>
<li class="heading"><span>Leaf 3</span></li>
<ul>
<li><a class="" href="../Leaf-3/basic.html">basic</a></li>
<li><a class="" href="../Leaf-3/helpers.html">helpers</a></li>
<li><a class="" href="../Leaf-3/mvc.html">mvc</a></li>
</ul>
<li class="heading"><span>Network Net</span></li>
<ul>
<li><a class="" href="../Network_Net/anonsurf_vpn_install.html">anonsurf vpn install</a></li>
<li><a class="" href="../Network_Net/dd-wrt.html">dd wrt</a></li>
<li><a class="" href="../Network_Net/dd-wrt_multiple_bssids.html">dd wrt multiple bssids</a></li>
<li><a class="" href="../Network_Net/ddwrt_basic_wl_settings.html">ddwrt basic wl settings</a></li>
<li><a class="" href="../Network_Net/download_youtube_videos.html">download youtube videos</a></li>
<li><a class="" href="../Network_Net/riseup-vpn.html">riseup vpn</a></li>
</ul>
<li class="heading"><span>PHP</span></li>
<ul>
<li><a class="" href="22092023.html">22092023</a></li>
<li><a class="" href="LearningResources.html">LearningResources</a></li>
<li><a class="" href="edx_js_backend_frameworks.html">edx js backend frameworks</a></li>
<li><a class="" href="embed_lib.html">embed lib</a></li>
<li><a class="active" href="express_mdn.html">express mdn</a></li>
<li><a class="" href="helpful_resources.html">helpful resources</a></li>
<li><a class="" href="html_forms.html">html forms</a></li>
<li><a class="" href="http_response_codes.html">http response codes</a></li>
<li><a class="" href="json_guide.html">json guide</a></li>
<li><a class="" href="local-servers.html">local servers</a></li>
<li><a class="" href="logical_gradation_of_developers.html">logical gradation of developers</a></li>
<li><a class="" href="markdown.html">markdown</a></li>
<li><a class="" href="namespace_review.html">namespace review</a></li>
<li><a class="" href="notes_for_proff_nodejs_express.html">notes for proff nodejs express</a></li>
<li><a class="" href="npm_quick_ref.html">npm quick ref</a></li>
<li><a class="" href="pandoc_quick_ref.html">pandoc quick ref</a></li>
<li><a class="" href="php_basics.html">php basics</a></li>
<li><a class="" href="php_iterators.html">php iterators</a></li>
<li><a class="" href="wget-ultimate-examples.html">wget ultimate examples</a></li>
</ul>
<li class="heading"><span>Packaging</span></li>
<ul>
<li><a class="" href="../Packaging/apt.html">apt</a></li>
<li><a class="" href="../Packaging/composer.html">composer</a></li>
</ul>
<li class="heading"><span>ReviewQuestions</span></li>
<ul>
<li><a class="" href="../ReviewQuestions/strings_quotes.html">strings quotes</a></li>
</ul>
<li class="heading"><span>Symfony</span></li>
<ul>
<li><a class="" href="../Symfony/Encore.html">Encore</a></li>
<li class="heading"><span>Symfonycasts</span></li>
<ul>
<li><a class="" href="../Symfony/Symfonycasts/Composer.html">Composer</a></li>
<li><a class="" href="../Symfony/Symfonycasts/Dependency Injection and the art of services and containers.html">Dependency Injection and the art of services and containers</a></li>
<li><a class="" href="../Symfony/Symfonycasts/Symfony 6 Fundamentals: Services, Config & Environments.html">Symfony 6 Fundamentals: Services, Config & Environments</a></li>
</ul>
<li><a class="" href="../Symfony/chapter5_symfonyCats.html">chapter5 symfonyCats</a></li>
<li><a class="" href="../Symfony/symfony_and_http_fundamentals.html">symfony and http fundamentals</a></li>
<li><a class="" href="../Symfony/symfony_basics.html">symfony basics</a></li>
<li><a class="" href="../Symfony/twig_basics.html">twig basics</a></li>
<li><a class="" href="../Symfony/twig_cheatsheet.html">twig cheatsheet</a></li>
</ul>
<li class="heading"><span>javascript</span></li>
<ul>
<li><a class="" href="../javascript/js_cheatsheet.html">js cheatsheet</a></li>
</ul>
</ul>
</nav>
<article>
	<p>from mdn: <a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/</a></p>
<ul>
<li>The  <em>Express application</em>  tobject also provides methods to define route handlers for all the other HTTP verbs, which are mostly used in exactly the same way:</li>
</ul>
<p><code>checkout()</code>, <code>copy()</code>, <strong><code>delete()</code></strong>, <strong><code>get()</code></strong>, <code>head()</code>, <code>lock()</code>, <code>merge()</code>, <code>mkactivity()</code>,  <code>mkcol()</code>,  <code>move()</code>,  <code>m-search()</code>,  <code>notify()</code>,  <code>options()</code>,  <code>patch()</code>,  <strong><code>post()</code></strong>,  <code>purge()</code>,  <strong><code>put()</code></strong>,  <code>report()</code>,  <code>search()</code>,  <code>subscribe()</code>,  <code>trace()</code>,  <code>unlock()</code>,  <code>unsubscribe()</code>.</p>
<ul>
<li>There is a special routing method, <code>app.all()</code>, which will be called in response to any HTTP method. This is used for loading middleware functions at a particular path for all request methods:</li>
</ul>
<pre><code class="language-js">app.all('/secret', function(req, res, next) {
  console.log('Accessing the secret section ...');
  next(); // pass control to the next handler
});
</code></pre>
<p>Routes allow you to match particular patterns of characters in a URL, and extract some values from the URL and pass them as parameters to the route handler (as attributes of the request object passed as a parameter).</p>
<ul>
<li>Routes allow you to match particular patterns of characters in a URL, and extract some values from the URL and pass them as parameters to the route handler (as attributes of the request object passed as a parameter).</li>
<li>For example, we can create our wiki route in a module named <strong>wiki.js</strong>, and then export the <code>Router</code> object, as shown below:</li>
</ul>
<pre><code class="language-js">// wiki.js - Wiki route module

const express = require('express');
const router = express.Router();

// Home page route
router.get('/', function(req, res) {
  res.send('Wiki home page');
});

// About page route
router.get('/about', function(req, res) {
  res.send('About this wiki');
});

module.exports = router;
</code></pre>
<blockquote>
<p><strong>Note:</strong> Adding routes to the <code>Router</code> object is just like adding routes to the <code>app</code> object</p>
</blockquote>
<p>To use the router in our main app file we would then <code>require()</code> the route module (<strong>wiki.js</strong>), then call <code>use()</code> on the <em>Express</em> application to add the Router to the middleware handling path. The two routes will then be accessible from <code>/wiki/</code> and <code>/wiki/about/</code>.</p>
<h3 id="using-middleware%3A">Using middleware: <a class="heading-anchor-permalink" href="#using-middleware%3A">#</a></h3>
<p>Middleware is used extensively in Express apps, for tasks from serving static files to error handling, to compressing HTTP responses. The order in which middleware is called is up to the app developer.</p>
<blockquote>
<p><strong>Note:</strong> The middleware can perform any operation, execute any code, make changes to the request and response object, and it can <em>also end the request–response cycle</em>. If it does not end the cycle then it must call <code>next()</code> to pass control to the next middleware function (or the request will be left hanging).</p>
</blockquote>
<p>You can find a list of middleware packages maintained by the express team which include other 3rd party packages: <a href="http://expressjs.com/en/resources/middleware.html">http://expressjs.com/en/resources/middleware.html</a></p>
<h1 id="express-tutorial-part-2%3A-creating-a-skeleton-website%3A">Express Tutorial Part 2: Creating a skeleton website: <a class="heading-anchor-permalink" href="#express-tutorial-part-2%3A-creating-a-skeleton-website%3A">#</a></h1>
<h2 id="%5Binstalling-the-express-application-generator%5D">[Installing the Express Application Generator] <a class="heading-anchor-permalink" href="#%5Binstalling-the-express-application-generator%5D">#</a></h2>
<pre><code class="language-bash">npm install express-generator -g
</code></pre>
<p>create an <code>Express</code> app named ‘helloworld’:
<code>$ express helloworld</code></p>
<p>change directory:<br>
<code>$ cd helloworld</code></p>
<p>install dependencies:<br>
<code>$ npm install</code></p>
<p>run the app:<br>
<code>$ DEBUG=helloworld:* npm start</code></p>
<p>The generator has a number of options, which you can view on the command line using the  <code>--help</code>  (or  <code>-h</code>) command:</p>
<pre><code class="language-bash">&gt; express --help

  Usage: express [options] [dir]

  Options:

        --version        output the version number
    -e, --ejs            add ejs engine support
        --pug            add pug engine support
        --hbs            add handlebars engine support
    -H, --hogan          add hogan.js engine support
    -v, --view &lt;engine&gt;  add view &lt;engine&gt; support (dust|ejs|hbs|hjs|jade|pug|twig|vash) (defaults to jade)
        --no-view        use static html instead of view engine
    -c, --css &lt;engine&gt;   add stylesheet &lt;engine&gt; support (less|stylus|compass|sass) (defaults to plain css)
        --git            add .gitignore
    -f, --force          force on non-empty directory
    -h, --help           output usage information           output usage information
</code></pre>
<h3 id="what-view-engine-should-i-use%3F"><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website#what_view_engine_should_i_use" title="Permalink to What view engine should I use?">What view engine should I use?</a> <a class="heading-anchor-permalink" href="#what-view-engine-should-i-use%3F">#</a></h3>
<p>The <em>Express Application Generator</em> allows you to configure a number of popular view/templating engines, including [EJS][<a href="https://www.npmjs.com/package/ejs">https://www.npmjs.com/package/ejs</a>], [Hbs][<a href="http://github.com/donpark/hbs">http://github.com/donpark/hbs</a>], [Pug][<a href="https://pugjs.org/api/getting-started.html">https://pugjs.org/api/getting-started.html</a>] (Jade), [Twig][<a href="https://www.npmjs.com/package/twig">https://www.npmjs.com/package/twig</a>], and [Vash][<a href="https://www.npmjs.com/package/vash">https://www.npmjs.com/package/vash</a>), although it chooses Jade by default if you don’t specify a view option.</p>
<p>Generally speaking, you should select a templating engine that delivers all the functionality you need and allows you to be productive sooner — or in other words:</p>
<ul>
<li>Time to productivity.</li>
<li>Popularity and activity — Review the popularity of the engine and whether it has an active community.</li>
<li>Style — Some template engines use specific markup to indicate inserted content within “ordinary” HTML, while others construct the HTML using a different syntax (for example, using indentation and block names).</li>
<li>Performance/rendering time.</li>
<li>Features — you should consider whether the engines you look at have the following features available:
<ul>
<li>Layout inheritance: Allows you to define a base template and then “inherit” just the parts of it that you want to be different for a particular page. This is typically a better approach than building templates by including a number of required components or building a template from scratch each time.</li>
<li>“Include” support: Allows you to build up templates by including other templates.</li>
<li>Concise variable and loop control syntax.</li>
<li>Ability to filter variable values at template level (e.g. making variables upper-case, or formatting a date value).</li>
<li>Ability to generate output formats other than HTML (e.g. JSON or XML).</li>
<li>Support for asynchronous operations and streaming.</li>
<li>Client-side features. If a templating engine can be used on the client this allows the possibility of having all or most of the rendering done client-side.</li>
</ul>
</li>
</ul>
<blockquote>
<p>for this project we will use <code>Pug</code> templating engine.</p>
</blockquote>
<h3 id="what-css-stylesheet-engine-should-i-use%3F"><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website#what_css_stylesheet_engine_should_i_use" title="Permalink to What CSS stylesheet engine should I use?">What CSS stylesheet engine should I use?</a> <a class="heading-anchor-permalink" href="#what-css-stylesheet-engine-should-i-use%3F">#</a></h3>
<p>by use the one of the most common CSS stylesheet engines: <code>LESS, SASS, Compass, Stylus</code>.</p>
<p>As with templating engines, you should use the stylesheet engine that will allow your team to be most productive. For this project, we’ll use vanilla CSS (the default) as our CSS requirements are not sufficiently complicated to justify using anything else.</p>
<h3 id="what-database-should-i-use%3F"><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website#what_database_should_i_use" title="Permalink to What database should I use?">What database should I use?</a> <a class="heading-anchor-permalink" href="#what-database-should-i-use%3F">#</a></h3>
<p>The generated code doesn’t use/include any databases. <em>Express</em> apps can use any <a href="https://expressjs.com/en/guide/database-integration.html">database mechanism</a> supported by <em>Node</em> (<em>Express</em> itself doesn’t define any specific additional behavior/requirements for database management).</p>
<h3 id="creating-the-project">Creating the project <a class="heading-anchor-permalink" href="#creating-the-project">#</a></h3>
<p>For the sample Local Library app we’re going to build, we’ll create a project named express-locallibrary-tutorial using the Pug template library and no CSS engine.First, navigate to where you want to create the project and then run the Express Application Generator in the command prompt as shown:</p>
<p><code>$ express express-locallibrary-tutorial --view=pug</code></p>
<p>The generator will create (and list) the project’s files.<br>
create : express-locallibrary-tutorial<br>
create : express-locallibrary-tutorial\public<br>
create : express-locallibrary-tutorial\public\javascripts<br>
create : express-locallibrary-tutorial\public\images<br>
create : express-locallibrary-tutorial\public\stylesheets<br>
create : express-locallibrary-tutorial\public\stylesheets\style.css
create : express-locallibrary-tutorial\routes<br>
create : express-locallibrary-tutorial\routes\index.js
create : express-locallibrary-tutorial\routes\users.js
create : express-locallibrary-tutorial\views<br>
create : express-locallibrary-tutorial\views\error.pug
create : express-locallibrary-tutorial\views\index.pug
create : express-locallibrary-tutorial\views\layout.pug
create : express-locallibrary-tutorial\app.js
create : express-locallibrary-tutorial\package.json
create : express-locallibrary-tutorial\bin<br>
create : express-locallibrary-tutorial\bin\www</p>
<p>change directory:
&gt; cd express-locallibrary-tutorial</p>
<p>install dependencies:
&gt; npm install</p>
<p>run the app (Bash (Linux or macOS))
&gt; DEBUG=express-locallibrary-tutorial:* npm start</p>
<p>run the app (PowerShell (Windows))
&gt; $ENV:DEBUG = “express-locallibrary-tutorial:*”; npm start</p>
<p>run the app (Command Prompt (Windows)):
&gt; SET DEBUG=express-locallibrary-tutorial:* &amp; npm start</p>
<h2 id="enable-server-restart-on-file-changes"><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website#enable_server_restart_on_file_changes" title="Permalink to Enable server restart on file changes">Enable server restart on file changes</a> <a class="heading-anchor-permalink" href="#enable-server-restart-on-file-changes">#</a></h2>
<blockquote>
<p>Note: any change4s you make to your express website are currently not visible until you restart the server.  A convention tool for this purpose is <code>nodemon</code>. Here we’ll install and use it locally as a developer dependency so any developers working with this project get it automatically when they install application.</p>
</blockquote>
<p>install <code>nodemon</code> locally:</p>
<p><code>$ npm install --save-dev nodemon</code></p>
<p><strong>Note:</strong> Because the tool isn’t installed globally we can’t launch it from the command line (unless we add it to the path) but we can call it from an NPM script because NPM knows all about the installed packages. Find the  <code>scripts</code>  section of your package.json. Initially, it will contain one line, which begins with  <code>&quot;start&quot;</code>. Update it by putting a comma at the end of that line, and adding the  <code>&quot;devstart&quot;</code> and  <code>&quot;serverstart&quot;</code>  lines shown below:</p>
<pre><code>  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node ./bin/www&quot;,
    &quot;devstart&quot;: &quot;nodemon ./bin/www&quot;,
    &quot;serverstart&quot;: &quot;DEBUG=express-locallibrary-tutorial:* npm run devstart&quot;
  },
</code></pre>
<p>We can now start the server in almost exactly the same way as previously, but using the <code>devstart</code> command:</p>
<p>On macOS or Linux, use this command:</p>
<pre><code class="language-bash">DEBUG=express-locallibrary-tutorial:* npm run devstart
</code></pre>
<h2 id="the-generated-project"><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website#the_generated_project" title="Permalink to The generated project">The generated project</a> <a class="heading-anchor-permalink" href="#the-generated-project">#</a></h2>
<h3 id="directory-structure"><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website#directory_structure" title="Permalink to Directory structure">Directory structure</a> <a class="heading-anchor-permalink" href="#directory-structure">#</a></h3>
<p>The generated project, now that you have installed dependencies, has the following file structure (files are the items  <strong>not</strong>  prefixed with “/”). The  <strong>package.json</strong>  file defines the application dependencies and other information. It also defines a startup script that will call the application entry point, the JavaScript file  <strong>/bin/www</strong>.</p>
<h3 id="package.json"><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website#package.json" title="Permalink to package.json">package.json</a> <a class="heading-anchor-permalink" href="#package.json">#</a></h3>
<p>The  <strong>package.json</strong>  file defines the application dependencies and other information:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;express-locallibrary-tutorial&quot;,
  &quot;version&quot;: &quot;0.0.0&quot;,
  &quot;private&quot;: true,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node ./bin/www&quot;
  },
  
  &quot;dependencies&quot;: {
    &quot;cookie-parser&quot;: &quot;~1.4.4&quot;,
    &quot;debug&quot;: &quot;~2.6.9&quot;,
    &quot;express&quot;: &quot;~4.16.1&quot;,
    &quot;http-errors&quot;: &quot;~1.6.3&quot;,
    &quot;morgan&quot;: &quot;~1.9.1&quot;,
    &quot;pug&quot;: &quot;2.0.0-beta11&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;nodemon&quot;: &quot;^2.0.4&quot;
  }
}
</code></pre>
<p>The dependencies include the  <em>express</em>  package and the package for our selected view engine (<em>pug</em>). In addition, we have the following packages that are useful in many web applications:</p>
<ul>
<li><a href="https://www.npmjs.com/package/cookie-parser">cookie-parser</a>: Used to parse the cookie header and populate  <code>req.cookies</code>  (essentially provides a convenient method for accessing cookie information).</li>
<li><a href="https://www.npmjs.com/package/debug">debug</a>: A tiny node debugging utility modeled after node core’s debugging technique.</li>
<li><a href="https://www.npmjs.com/package/morgan">morgan</a>: An HTTP request logger middleware for node.</li>
<li><a href="https://www.npmjs.com/package/http-errors">http-errors</a>: Create HTTP errors where needed (for express error handling).</li>
</ul>
<p>The scripts section first defines a “<em>start</em>” script, which is what we are invoking when we call  <code>npm start</code>  to start the server (this script was added by the  <em>Express Application Generator</em>). From the script definition, you can see that this actually starts the JavaScript file  <strong>./bin/www</strong>  with  <em>node</em>.</p>
<p>The file <code>/bin/www</code>is the application entry point! The very first thing this does is <code>require()</code> the “real” application entry point (<code>app.js</code>, in the project root) that sets up and returns the express() application object. <code>#!/usr/bin/env node</code></p>
<pre><code class="language-js">/**
 * Module dependencies.
 */
var app = require('../app');
</code></pre>
<p>Note: <code>require()</code> is a global node function that is used to import modules into the current file. Here we specify <code>app.js</code> module using a relative path and omitting the optional (.js) file extension.</p>
<h3 id="app.js"><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website#app.js" title="Permalink to app.js">app.js</a> <a class="heading-anchor-permalink" href="#app.js">#</a></h3>

</article>

</body>
</html>